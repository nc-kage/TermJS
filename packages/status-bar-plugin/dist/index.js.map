{"version":3,"file":"index.js","sources":["../src/StatusBar/StatusView/index.ts","../src/StatusBar/constants.ts","../src/StatusBar/index.ts"],"sourcesContent":["import { TemplateEngine } from '@term-js/term';\n\nimport template from './template.html';\nimport css from './index.scss';\n\nimport IStatusView from '@StatusBar/StatusView/IStatusView';\n\nclass StatusView extends TemplateEngine implements IStatusView {\n  private iconField: string = '';\n  public set icon(val: string) {\n    this.iconField = val;\n    this.render();\n  }\n  public get icon(): string {\n    return this.iconField;\n  }\n\n  private textField: string = '';\n  public set text(val: string) {\n    this.textField = val;\n    this.render();\n  }\n  public get text(): string {\n    return this.textField;\n  }\n\n  private isRendered: boolean = false;\n\n  constructor(container: HTMLElement) {\n    super(template, container);\n  }\n\n  render() {\n    const { icon, text, isRendered } = this;\n    super.render({ css, icon, text }, isRendered ? { replace: this } : {});\n    this.isRendered = true;\n  }\n}\n\nexport default StatusView;\n","export const PLUGIN_NAME = 'status-bar-plugin';\n","import { Plugin, ITermInfo, IKeyboardShortcutsManager } from '@term-js/term';\n\nimport './theme.scss';\n\nimport IStatusBar from '@StatusBar/IStatusBar';\nimport StatusView from '@StatusBar/StatusView';\nimport IStatusView from '@StatusBar/StatusView/IStatusView';\nimport { PLUGIN_NAME } from '@StatusBar/constants';\n\nclass StatusBar extends Plugin implements IStatusBar {\n  public readonly name: string = PLUGIN_NAME;\n\n  private text: string = '';\n  private icon: string = '';\n  private view?: IStatusView;\n  public set status(val: { text: string; icon?: string }) {\n    const { view } = this;\n    this.text = val.text;\n    this.icon = val.icon || '';\n    if (view) {\n      view.icon = this.icon;\n      view.text = this.text;\n    }\n  }\n  public get status(): { text: string; icon?: string } {\n    const { text, icon } = this;\n    return { text, icon };\n  }\n\n  public setTermInfo(termInfo: ITermInfo, keyboardShortcutsManager: IKeyboardShortcutsManager) {\n    super.setTermInfo(termInfo, keyboardShortcutsManager);\n    this.setView();\n  }\n\n  public updateTermInfo(termInfo: ITermInfo) {\n    super.updateTermInfo(termInfo);\n    this.setView();\n  }\n\n  public destroy() {\n    const { view } = this;\n    if (view) view.destroy();\n    super.destroy();\n  }\n\n  private setView() {\n    const { termInfo, text, icon, view } = this;\n    if (!termInfo) return;\n    const { root } = termInfo.elements;\n    if (!root || view) return;\n    this.view = new StatusView(root as HTMLElement);\n    this.view.text = text;\n    this.view.icon = icon;\n    this.view.render();\n  }\n}\n\nexport default StatusBar;\n"],"names":["TemplateEngine","Plugin"],"mappings":"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"}