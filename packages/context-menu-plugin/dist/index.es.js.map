{"version":3,"file":"index.es.js","sources":["../src/ContextMenu/ContextMenuView/index.ts","../src/ContextMenu/constants.ts","../../../general/utils/viewport.ts","../../../general/utils/event.ts","../src/ContextMenu/index.ts"],"sourcesContent":["import { TemplateEngine, ITemplateEngine } from '@term-js/term';\n\nimport template from './template.html';\nimport css from './index.scss';\n\nclass ContextMenuView extends TemplateEngine implements ITemplateEngine {\n  private reRender: boolean = false;\n  constructor(container: HTMLElement) {\n    super(template, container);\n  }\n\n  public render() {\n    super.render({ css }, this.reRender ? { replace: this } : {});\n    this.reRender = true;\n  }\n}\n\nexport default ContextMenuView;\n","export const PLUGIN_NAME = 'context-menu';\nexport const END_OF_LINE_TYPE = 'end of line';\nexport const POSITION_TARGET_TYPE = 'position';\nexport const CLOSE_ACTION = 'context-menu-plugin-close';\nexport const ESC_KEY_CODE = 27;\n","export const getScrollbarSize = (container?: HTMLElement): number => {\n  let { size } = getScrollbarSize as { size?: number };\n  if (size) return size;\n  const target = container || document.body;\n  const div1: HTMLDivElement = document.createElement('div');\n  const div2: HTMLDivElement = document.createElement('div');\n  div1.style.width = '100px';\n  div1.style.height = '100px';\n  div1.style.overflow = 'scroll';\n  div2.style.height = '100px';\n  target.appendChild(div1);\n  div1.appendChild(div2);\n  size = div1.offsetWidth - div2.offsetWidth;\n  target.removeChild(div1);\n  (getScrollbarSize as { size?: number }).size = size;\n  return size;\n};\n\nexport const getRelativePosition = (\n  el: HTMLElement, container: HTMLElement,\n): { top: number; bottom: number; left: number; right: number; width: number; height: number } => {\n  const scrollBarSize = getScrollbarSize(container);\n  const elInfo = el.getBoundingClientRect();\n  const containerInfo = container.getBoundingClientRect();\n  const left = elInfo.left - containerInfo.left;\n  const top = elInfo.top - containerInfo.top;\n  const containerWidth = containerInfo.width - scrollBarSize;\n  const containerHeight = containerInfo.height - scrollBarSize;\n  return {\n    left,\n    top,\n    bottom: containerHeight - top - elInfo.height,\n    right: containerWidth - left - elInfo.width,\n    width: elInfo.width,\n    height: elInfo.height,\n  };\n};\n","export const getKeyCode = (e: KeyboardEvent): number | null => e ? e.which || e.keyCode : null;\nexport const stopPropagation = (e: Event) => e.stopPropagation();\nexport const preventDefault = (e: Event) => e.preventDefault();\nexport const preventContextMenu = (e: MouseEvent): boolean => {\n  if (e.shiftKey) return false;\n  preventDefault(e);\n  return true;\n};\n","import { Plugin, ITermInfo, IKeyboardShortcutsManager, ITemplateEngine } from '@term-js/term';\nimport { isString, noop } from 'lodash-es';\n\nimport './theme.scss';\n\nimport IContextMenu from '@ContextMenu/IContextMenu';\nimport ContextMenuView from '@ContextMenu/ContextMenuView';\nimport { PositionType, ShowOptionsType, TargetType } from '@ContextMenu/types';\nimport {\n  CLOSE_ACTION,\n  END_OF_LINE_TYPE,\n  ESC_KEY_CODE,\n  PLUGIN_NAME,\n  POSITION_TARGET_TYPE,\n} from '@ContextMenu/constants';\nimport { getRelativePosition } from '@general/utils/viewport';\nimport { stopPropagation } from '@general/utils/event';\n\nclass ContextMenu extends Plugin implements IContextMenu {\n  public readonly name: string = PLUGIN_NAME;\n  private contextMenuView?: ITemplateEngine;\n  private target?: TargetType;\n  private position?: PositionType;\n  private isVisible: boolean = false;\n  private escHide: boolean = false;\n  private aroundClickHide: boolean = false;\n  private onHide?: () => void;\n\n  public show(\n    content: HTMLElement | string, target: TargetType, options: ShowOptionsType = {},\n  ) {\n    this.hide();\n    const { position, escHide = false, aroundClickHide = false, onHide } = options;\n    if (target === POSITION_TARGET_TYPE && !position) return;\n    this.target = target;\n    this.escHide = escHide;\n    this.onHide = onHide;\n    this.aroundClickHide = aroundClickHide;\n    this.render(content);\n    this.updatePosition();\n  }\n\n  public hide() {\n    const { contextMenuView, onHide } = this;\n    if (contextMenuView) {\n      const root = contextMenuView.getRef('root');\n      if (root) root.removeEventListener('click', stopPropagation);\n      contextMenuView.destroy();\n      delete this.contextMenuView;\n      if (onHide) onHide();\n    }\n  }\n\n  public setTermInfo(termInfo: ITermInfo, keyboardShortcutsManager: IKeyboardShortcutsManager) {\n    super.setTermInfo(termInfo, keyboardShortcutsManager);\n    const { root } = termInfo.elements;\n    root?.addEventListener('click', this.rootClickHandler);\n    keyboardShortcutsManager.addShortcut(CLOSE_ACTION, { code: ESC_KEY_CODE });\n    keyboardShortcutsManager.addListener(CLOSE_ACTION, this.escHandler);\n    this.updatePosition();\n  }\n\n  public updateTermInfo(termInfo: ITermInfo) {\n    super.updateTermInfo(termInfo);\n    this.updatePosition();\n  }\n\n  public destroy() {\n    const { keyboardShortcutsManager, termInfo } = this;\n    const root = termInfo?.elements.root;\n    if (keyboardShortcutsManager) {\n      keyboardShortcutsManager.removeListener(this.escHandler);\n      keyboardShortcutsManager.removeShortcut(CLOSE_ACTION);\n    }\n    if (root) root.removeEventListener('click', this.rootClickHandler);\n    super.destroy();\n  }\n\n  public clear() {\n    this.hide();\n    super.clear();\n  }\n\n  private escHandler = () => {\n    if (this.escHide) this.hide();\n  }\n\n  private rootClickHandler = () => {\n    if (this.aroundClickHide) this.hide();\n  }\n\n  private render(content: HTMLElement | string) {\n    const { termInfo, target } = this;\n    const edit = target === END_OF_LINE_TYPE ? termInfo?.elements?.edit : termInfo?.elements?.root;\n    if (!edit) return;\n    const contextMenuView = new ContextMenuView(edit as HTMLElement);\n    contextMenuView.render();\n    const root = contextMenuView.getRef('root');\n    if (!root) return;\n    root.addEventListener('click', stopPropagation);\n    this.contextMenuView = contextMenuView;\n    this.isVisible = false;\n    return isString(content) ? root.innerHTML = content : root.appendChild(content);\n  }\n\n  private updatePosition() {\n    const { target, isVisible } = this;\n    (({\n      [END_OF_LINE_TYPE]: () => this.updateEndOfLinePosition(),\n      [POSITION_TARGET_TYPE]: () => this.updateFixedPosition(),\n    } as { [key: string]: () => void })[target || ''] || noop)();\n    if (!isVisible) this.setVisible();\n  }\n\n  private updateEndOfLinePosition() {\n    const { termInfo, contextMenuView } = this;\n    if (!termInfo || !contextMenuView) return;\n    const { size: { height } } = termInfo.caret;\n    const { endOffset: { left, top: offsetTop } } = termInfo.edit;\n    const root = contextMenuView.getRef('root');\n    if (!root) return;\n    const top = offsetTop + height;\n    (root as HTMLElement).style.left = `${left}px`;\n    (root as HTMLElement).style.top = `${top}px`;\n    this.normalizedPosition(left, top);\n  }\n\n  private updateFixedPosition() {\n    const { position, contextMenuView } = this;\n    if (!position || !contextMenuView) return;\n    const root = contextMenuView.getRef('root');\n    if (!root) return;\n    (root as HTMLElement).style.left = `${position.left}px`;\n    (root as HTMLElement).style.top = `${position.top}px`;\n    this.normalizedPosition(position.left, position.top);\n  }\n\n  private setVisible() {\n    const { contextMenuView } = this;\n    if (!contextMenuView) return;\n    const root = contextMenuView.getRef('root');\n    if (!root) return;\n    (root as HTMLElement).style.visibility = 'visible';\n    this.isVisible = true;\n  }\n\n  private normalizedPosition(left: number, top: number) {\n    const { contextMenuView, target, termInfo } = this;\n    const root = this.termInfo?.elements?.root;\n    if (!contextMenuView || !root) return;\n    const contextMenuRoot = contextMenuView.getRef('root');\n    if (!contextMenuRoot) return;\n    const {\n      right, bottom,\n    } = getRelativePosition(contextMenuRoot as HTMLElement, root as HTMLElement);\n    if (right < 0) (contextMenuRoot as HTMLElement).style.left = `${left + right}px`;\n    if (bottom < 0) {\n      const updatedTop = top - (contextMenuRoot as HTMLElement).offsetHeight\n        - (target === END_OF_LINE_TYPE ? termInfo?.caret.size.height || 0 : 0);\n      (contextMenuRoot as HTMLElement).style.top = `${updatedTop}px`;\n    }\n  }\n}\n\nexport default ContextMenu;\n"],"names":[],"mappings":"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"}